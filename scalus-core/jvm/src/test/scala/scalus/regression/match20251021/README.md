# Fix for Wildcard Case Duplication in @unchecked Patterns

## Problem

When compiling Scala code with `@unchecked` patterns to UPLC, the compiler was throwing:
```
java.lang.IllegalArgumentException: Wildcard case must be the last and only one in match expression
```

## Root Cause

In `SumCaseSirTypeGenerator.scala` (lines 222-242), there was logic to add a wildcard case for `@unchecked` patterns. The comment claimed that Scala compiler "doesn't have a wildcard case", but in Scala 3, the compiler DOES generate a wildcard case with an ERROR for incomplete matches with `@unchecked`.

This caused a duplicate wildcard to be added:
1. Original wildcard case generated by Scala compiler with ERROR
2. Additional wildcard case added by the SIR lowering code

When the lowering code tried to process these cases, it would find the first wildcard at a non-last position and throw an error.

## Solution

Added a check to see if a wildcard case already exists before adding one:

```scala
val hasWildcard = cases.lastOption.exists(_.pattern == SIR.Pattern.Wildcard)
val enhancedCases =
    if isUnchecked && cases.length < allConstructors.size && !hasWildcard then
        // Add wildcard case only if one doesn't already exist
        ...
```

## Files Modified

- `scalus-core/shared/src/main/scala/scalus/sir/lowering/typegens/SumCaseSirTypeGenerator.scala`

## Testing

Created minimal reproduction test in:
- `scalus-core/jvm/src/test/scala/scalus/regression/match20251021/MinimalMatchTest.scala`
- `scalus-core/jvm/src/test/scala/scalus/regression/match20251021/TxOutExtensions.scala`

The test verifies that `@unchecked` pattern matches like:
```scala
val OutputDatum(inlineDatum) = self.datum: @unchecked
```

now compile successfully to UPLC.

## Note

`BaseSimpleSirToUplcLowering.scala` already had this fix (using `existsWildcardCase` check), but `SumCaseSirTypeGenerator.scala` didn't, which is why the error occurred when using `SirToUplcV3Lowering` backend.

## Other Test Failures

The `hydrozoa20250804.SameCborTest` still has a different failure related to type variable representation:
```
scalus.sir.lowering.LoweringException: Unsupported representation TypeVarRepresentation(false) for match expression
```

This is a separate issue from the wildcard duplication bug and needs to be investigated separately.

The broader test suite shows 11 test failures, some of which may be related to the V3 lowering backend or unrelated pre-existing issues.

## Recommended Follow-up Testing

To ensure all match lowering code is tested for similar wildcard issues, search for all type generators that handle match expressions:

```bash
grep -r "def.*match" --include="*TypeGenerator.scala" scalus-core/shared/src/main/scala/scalus/sir/
grep -r "Pattern.Wildcard" --include="*.scala" scalus-core/shared/src/main/scala/scalus/sir/lowering/
```

Each generator should be tested with:
1. Complete matches (all constructors covered)
2. Incomplete matches without @unchecked
3. Incomplete matches with @unchecked
4. Matches that already have explicit wildcard cases
